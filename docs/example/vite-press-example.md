# Vite Press æ­å»ºæ•™ç¨‹

> [!TIP]
>
> ä½¿ç”¨ [VitePress](https://vitepress.dev/guide/getting-started) æ­å»ºä¸ªäººåšå®¢ï¼Œä¸»è¦ç”¨äºè®°å½•æ­å»ºè¿‡ç¨‹

## ä¸€ã€æ¦‚è¿°

### 1.1 VitePress ä»‹ç»

[VitePress](https://vitepress.dev/zh/) æ˜¯ä¸€ä¸ªåŸºäº Vite å’Œ Vue 3 çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œä¸“é—¨ä¸ºæ„å»ºæ–‡æ¡£ç½‘ç«™è€Œè®¾è®¡ã€‚å®ƒæ˜¯ VuePress çš„ç»§æ‰¿è€…ï¼Œæ—¨åœ¨æä¾›æ›´å¿«çš„æ„å»ºé€Ÿåº¦å’Œæ›´ç°ä»£çš„å¼€å‘ä½“éªŒã€‚VitePress åˆ©ç”¨äº† Vite çš„å³æ—¶æœåŠ¡å™¨å¯åŠ¨å’Œæ¨¡å—çƒ­æ›¿æ¢ï¼ˆHMRï¼‰åŠŸèƒ½ï¼Œä½¿å¾—å¼€å‘æ–‡æ¡£ç½‘ç«™å˜å¾—æ›´åŠ é«˜æ•ˆã€‚

ä»¥ä¸‹æ˜¯ VitePress çš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼š

1. **å¿«é€Ÿå¼€å‘æœåŠ¡å™¨**ï¼šVitePress ä½¿ç”¨ Vite ä½œä¸ºå…¶å¼€å‘æœåŠ¡å™¨ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥äº«å—åˆ°å‡ ä¹å³æ—¶çš„æœåŠ¡å™¨å¯åŠ¨å’Œå¿«é€Ÿçš„ HMR

2. **åŸºäº Vue 3**ï¼šVitePress å®Œå…¨åŸºäº Vue 3ï¼ŒåŒ…æ‹¬ Composition APIã€Teleportã€Suspense ç­‰æ–°ç‰¹æ€§

3. **Markdown æ‰©å±•**ï¼šVitePress å¯¹ Markdown è¯­æ³•è¿›è¡Œäº†æ‰©å±•ï¼Œæ”¯æŒ Vue ç»„ä»¶ã€ä»£ç é«˜äº®ã€ç›®å½•ã€è‡ªå®šä¹‰å®¹å™¨ç­‰åŠŸèƒ½

4. **ä¸»é¢˜å®šåˆ¶**ï¼šä½ å¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå®šä¹‰ä¸»é¢˜æ¥å®šåˆ¶ç½‘ç«™çš„å¤–è§‚å’Œæ„Ÿè§‰ï¼ŒVitePress çš„ä¸»é¢˜ç³»ç»Ÿå…è®¸ä½ å®Œå…¨æ§åˆ¶ç½‘ç«™çš„æ ·å¼å’Œå¸ƒå±€

5. **é™æ€ç«™ç‚¹ç”Ÿæˆ**ï¼šVitePress ç”Ÿæˆçš„æ˜¯é™æ€ HTML æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å°†å®ƒä»¬éƒ¨ç½²åˆ°ä»»ä½•é™æ€æ–‡ä»¶æ‰˜ç®¡æœåŠ¡ä¸Šï¼Œå¦‚ GitHub Pagesã€Netlifyã€Vercel ç­‰

6. **æ’ä»¶ç³»ç»Ÿ**ï¼šVitePress æ”¯æŒæ’ä»¶ï¼Œä½ å¯ä»¥é€šè¿‡æ’ä»¶æ¥æ‰©å±• VitePress çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ·»åŠ æ–°çš„ Markdown æ‰©å±•ã€ä¿®æ”¹æ„å»ºè¿‡ç¨‹ç­‰ã€‚

7. **å›½é™…åŒ–æ”¯æŒ**ï¼šVitePress å†…ç½®äº†å¯¹å¤šè¯­è¨€æ–‡æ¡£çš„æ”¯æŒï¼Œå¯ä»¥è½»æ¾åœ°ä¸ºä¸åŒè¯­è¨€çš„è¯»è€…æä¾›ç¿»è¯‘

8. **SEO å‹å¥½**ï¼šç”±äº VitePress ç”Ÿæˆçš„æ˜¯é™æ€å†…å®¹ï¼Œå› æ­¤å®ƒå¯¹æœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰éå¸¸å‹å¥½

![image-20240516174320355](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516174320355.png)

### 1.2 åŠŸèƒ½

- markdown æ‹“å±•æ”¯æŒ
- å¼•å…¥ giscus å®ç°è¯„è®ºåŠŸèƒ½
- PicGO + OSS å®ç°å›¾ç‰‡ä¸Šä¼ 
- é€šè¿‡ github workflow è‡ªè¡Œæ­å»ºéƒ¨ç½²
- æä¾› Docker Image å®¹å™¨åŒ–éƒ¨ç½²
- é€šè¿‡ electron æ‰“åŒ…åˆ†å‘

## äºŒã€ç¯å¢ƒå®‰è£…

### 2.1 node + yarn

> [!CAUTION]
>
> - æ¡ˆä¾‹ä½¿ç”¨æœ€æ–°çš„ [node](https://nodejs.org/en/download) ç‰ˆæœ¬ `20.13.0` å…¶å®ƒç‰ˆæœ¬è¯·è‡ªè¡Œæµ‹è¯• (vite press å®˜æ–¹è¦æ±‚ node ç‰ˆæœ¬éœ€è¦ 18+)

node çš„å®‰è£…æ¨èä½¿ç”¨ nvm è¿›è¡Œå®‰è£…ï¼Œnvm æ˜¯ä¸€æ¬¾ node çš„ç®¡ç†å·¥å…·ï¼Œå¯ä»¥åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„ node ï¼Œå®‰è£…æ–¹å¼ï¼š

- ç›´æ¥åˆ° https://github.com/coreybutler/nvm-windows/releases/tag/1.1.12 è¿›è¡Œä¸‹è½½å³å¯

![image-20240516180515773](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516180515773.png)

å®‰è£…å¥½åå¯ä»¥é€šè¿‡ `nvm -v` æŸ¥çœ‹ nvm çš„ç‰ˆæœ¬ï¼Œå…¶å…·ä½“ä½¿ç”¨è¯·å‚è€ƒ https://github.com/coreybutler/nvm-windows

æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆé€šè¿‡ nvm å®‰è£… node + npmï¼Œç„¶åé€šè¿‡ npm å®‰è£… yarn

- æ‰§è¡Œ `nvm install 20.13.0`
- å®‰è£…å®Œæ¯•åæ‰§è¡Œ `nvm use 20.13.0`
- å®‰è£… yarn `npm install --global yarn`
- è¾“å‡ºä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹

![image-20240516130103516](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516130103516.png)

### 2.2 git

[Git](https://git-scm.com/) æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå®ƒè¢«å¹¿æ³›ç”¨äºè·Ÿè¸ªå’Œç®¡ç†è½¯ä»¶å¼€å‘é¡¹ç›®ä¸­çš„ä»£ç å˜æ›´ã€‚Git ç”± Linus Torvalds åœ¨2005å¹´åˆ›å»ºï¼Œæœ€åˆæ˜¯ä¸ºäº†ç®¡ç† Linux å†…æ ¸çš„å¼€å‘ï¼Œä½†ç°åœ¨å®ƒå·²ç»æˆä¸ºå…¨çƒå¼€å‘è€…ç¤¾åŒºä¸­æœ€å—æ¬¢è¿çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ä¹‹ä¸€ã€‚

![image-20240516175400308](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516175400308.png)

> [!TIP]
>
> å®‰è£…å¥½ git åæœ€åè¿›è¡Œä¸‹ä»£ç†é…ç½® ï¼ˆé…ç½®æ–‡ä»¶è·¯å¾„ä¸º ç”¨æˆ·ç›®å½•/.gitconfigï¼‰å¦‚æœç”¨æˆ·ç›®å½•ä¸‹æ²¡æœ‰è¯¥æ–‡ä»¶ï¼Œç›´æ¥æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªå°±å¯ä»¥

![image-20240516175626830](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516175626830.png)

å°†ä¸‹é¢çš„å†…å®¹æ·»åŠ åˆ° `.gitconfig` ä¸­

```ini
[user]
  name = cbq-win
  email = 2024cbq@gmail.com
[http]
  proxy = http://127.0.0.1:7890
  postBuffer = 5M
[https]
  proxy = https://127.0.0.1:7890
```

æŸ¥çœ‹ `git config --list`

![image-20240516175750338](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516175750338.png)

### 2.3 WebStorm

[WebStorm ](https://www.jetbrains.com/webstorm/promo/?msclkid=c817a54659e31aee6ed4c30381237bf5&utm_source=bing&utm_medium=cpc&utm_campaign=APAC_en_JP_WebStorm_Branded&utm_term=webstorm&utm_content=webstorm)æ˜¯ä¸€æ¬¾ç”± JetBrains å…¬å¸å¼€å‘çš„é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ï¼Œä¸“ä¸º JavaScriptã€TypeScriptã€HTML å’Œ CSS ç­‰å‰ç«¯æŠ€æœ¯æ ˆçš„å¼€å‘è€Œè®¾è®¡ã€‚å®ƒæä¾›äº†å¼ºå¤§çš„ä»£ç ç¼–è¾‘ã€è°ƒè¯•ã€ç‰ˆæœ¬æ§åˆ¶å’Œè‡ªåŠ¨åŒ–å·¥å…·ï¼Œæ—¨åœ¨æé«˜å¼€å‘è€…çš„å·¥ä½œæ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

![image-20240516175914413](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516175914413.png)

> [!TIP]
>
> æˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬ä¸º 2024.1.2ï¼Œæ¨èå¯¹ WebStorm ä¹Ÿè¿›è¡Œä¸‹ä»£ç†é…ç½®

![image-20240516180127273](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516180127273.png)

![image-20240516180141126](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516180141126.png)

## ä¸‰ã€ä½¿ç”¨

### 3.1 åˆå§‹åŒ– VitePress

1. `yarn add -D vitepress`

![image-20240516130828804](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516130828804.png)

2. `yarn vitepress init`

![image-20240516131011334](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516131011334.png)

3. `yarn run docs:dev`

![image-20240516131146093](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516131146093.png)

> [!TIP]
>
> ç‚¹å‡» `localhost:5173` å‡ºç°ä¸‹é¢é¡µé¢å³ä¸ºæ­å»ºæˆåŠŸ

![image-20240516131201607](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240516131201607.png)

## å››ã€é¡¹ç›®è¯´æ˜



## äº”ã€éƒ¨ç½²

```yaml
name: CI|CD éƒ¨ç½²æ–‡æ¡£
permissions:
  contents: write
on:
  push:
    tags:
      - v*

jobs:
  build:
    name: build vite press
    runs-on: ${{ matrix.os }}
    defaults:
      run:
        shell: bash

    if: startsWith(github.ref, 'refs/tags/')
    strategy:
      fail-fast: false
      matrix:
        os: [ ubuntu-latest ]

    steps:
      - name: è¯»å–ä»“åº“å†…å®¹ ğŸ‘“
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: è®¾ç½® Node.js ğŸ¶
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: å®‰è£… yarn ğŸ¸
        run: npm install --global yarn

      - name: æ„å»ºæ–‡æ¡£ ğŸ”¨
        env:
          NODE_OPTIONS: --max_old_space_size=8192
        run: |-
          yarn install
          yarn run docs:build
          > docs/.vitepress/dist/.nojekyll

      - name: æ‰“åŒ… zip æ–‡ä»¶ ğŸ”¨
        run: |
          mkdir -p ./build
          zip -r ./pages.zip ./docs/.vitepress/dist
          echo "pages.zip æ‰“åŒ…æˆåŠŸ"
          cp ./pages.zip ./build/

      - name: upload artifacts ğŸ“¦
        uses: actions/upload-artifact@v4
        with:
          name: ${{ matrix.os }}
          path: build

      - name: release ğŸ˜¶â€ğŸŒ«ï¸
        uses: softprops/action-gh-release@v1
        if: startsWith(github.ref, 'refs/tags/')
        with:
          files: 'build/**'
        env:
          GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}

      - name: éƒ¨ç½²æ–‡æ¡£ ğŸ‘Œ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: pages
          folder: docs/.vitepress/dist

```

![image-20240516182545151](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/202405161825256.png)

## å…¶å®ƒ
